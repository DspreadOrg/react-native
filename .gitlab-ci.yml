image: adildev/react-native-android:latest

before_script:
   - yarn

cache:
  untracked: true
  key: "$CI_PROJECT_ID"
  paths:
    - node_modules/
    - android/.gradle/

stages:
  - build
  - test
  - deploy

job 1:
  stage: build
  script: make build dependencies

job 2:
  stage: build
  script: make build artifacts

job 3:
  stage: test
  script: make test

job 4:
  stage: deploy
  script: make deploy
  artifacts:
    paths:
      - android/app/build/outputs/apk/debug/app-debug.apk



